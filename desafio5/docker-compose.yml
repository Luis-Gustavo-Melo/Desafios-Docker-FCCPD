version: '3.8'

services:
  service-users:
    build: ./users
    networks:
      - rede-gateway

  service-orders:
    build: ./orders
    networks:
      - rede-gateway

  api-gateway:
    image: nginx:alpine
    ports:
      - "8080:80"  
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro 
    depends_on:
      - service-users
      - service-orders
    networks:
      - rede-gateway

networks:
  rede-gateway:
    driver: bridge